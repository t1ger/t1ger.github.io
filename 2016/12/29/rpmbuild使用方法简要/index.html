	<!DOCTYPE HTML>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  <meta name="google-site-verification" content="B6QNJ8N2Q7hbnMncyrM5GMCWgK-vIAEx0o2DQre64ls">
  
  <title>rpmbuild使用方法简要 | t1ger的茶馆</title>
  <meta name="author" content="t1ger">
  
  <meta name="description" content="https://t1ger.github.io/">
  

  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta property="og:title" content="rpmbuild使用方法简要">
  <meta property="og:site_name" content="t1ger的茶馆">

  
  
		<!-- favicon -->
		<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
		<link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
		<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
		<link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
		<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
		<link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
		<link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
		<link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
		<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
		<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
		<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
		<link rel="manifest" href="/manifest.json">
		<meta name="msapplication-TileColor" content="#009688">
		<meta name="msapplication-TileImage" content="/mstile-144x144.png">
		<meta name="theme-color" content="#009688">
		<!-- favicon end -->
    <!-- <link href="/favicon.ico" rel="icon"> -->
  

  <!-- toc -->
  <link rel="stylesheet" href="/libs/tocify/jquery.tocify.css" media="screen" type="text/css">

  <!-- <link rel="stylesheet" href="/libs/bs/css/bootstrap.min.css" media="screen" type="text/css"> -->
  <link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.min.css" media="screen" type="text/css">

  <!-- material design -->
	<!-- <link rel="stylesheet" href="/libs/bs-material/css/ripples.min.css" media="screen" type="text/css"> -->
  <link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/ripples.min.css" media="screen" type="text/css">
  <!-- <link rel="stylesheet" href="/libs/bs-material/css/material.min.css" media="screen" type="text/css"> -->
	<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/material.min.css" media="screen" type="text/css">

  <link rel="stylesheet" href="/css/highlight.light.css" media="screen" type="text/css">

  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">

  

  

  <script src="//apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script>
	<script>window.jQuery || document.write('<script src="/libs/jquery-2.0.3.min.js" type="text/javascript"><\/script>')</script>

</head>
</html>
 	<body>
	  <nav class="navbar navbar-default">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">菜单</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">t1ger的茶馆</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav navbar-right">
                
                <li>
                    <a href="/" title="">
                    <i class="fa fa-home"></i>首页
                    </a>
                </li>
                
                <li>
                    <a href="/archives" title="">
                    <i class="fa fa-list"></i>存档
                    </a>
                </li>
                
                <li>
                    <a href="/about" title="">
                    <i class="fa fa-info-circle"></i>关于
                    </a>
                </li>
                
                <li>
                    <a href="/atom.xml" title="这是一个订阅源">
                    <i class="fa fa-rss"></i>RSS
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</nav>

	  <div class="container" >
	    <div class="row">
	
	<div class="col-md-9 center-content">
	

		<div class="content">
			<!-- index -->
		   

			  		<h2>rpmbuild使用方法简要</h2>
					
					<div>
						<span class="post-time">2016-12-29 11:05:13</span>
					</div>	
					

					<div class="article-content">
						<h5 id="Install-rpm-build-Package"><a href="#Install-rpm-build-Package" class="headerlink" title="Install rpm-build Package"></a><b>Install rpm-build Package</b></h5><ul>
<li>rpm-build package provides rpmbuild command which is used to build a binary RPM from source code, as configured with .spec file.</li>
<li>rpmdevtools package provides rpmdev-setuptree and rpmdev-newspec commands.</li>
<li>rpmdev-setuptree command is used to creates rpmbuild/ subdirectory, with appropriate subdirectories.</li>
<li><p>rpmdev-newspec command is used to creates a new package spec file in the local directory</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># yum install rpm-build rpmdevtools</span><br></pre></td></tr></table></figure>
<p>  rpm-build is dependent on the following package</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">elfutils-libelf</span><br><span class="line">rpm</span><br><span class="line">rpm-libs</span><br><span class="line">rpm-python</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="Create-RPM-Build-User"><a href="#Create-RPM-Build-User" class="headerlink" title="Create RPM Build User"></a><b>Create RPM Build User</b></h5><p>We do not want to build RPMs as the root account and maybe not even our personal account. It is common to have some form of rpm build account, maybe even, innovatively called rpmbuild. Logging as that user to build RPM files<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># useradd -m build</span><br><span class="line"># passwd build</span><br></pre></td></tr></table></figure></p>
<h5 id="RPM-Build-Directories"><a href="#RPM-Build-Directories" class="headerlink" title="RPM Build Directories"></a><b>RPM Build Directories</b></h5><p>rpm-build will automatically create the following directory structures that will be used during the RPM build.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># rpmdev-setuptree</span><br><span class="line"># ls -lF /root/rpmbuild/</span><br><span class="line">drwxr-xr-x. 2 root root 4096 Feb  4 12:21 BUILD/</span><br><span class="line">drwxr-xr-x. 2 root root 4096 Feb  4 12:21 BUILDROOT/</span><br><span class="line">drwxr-xr-x. 2 root root 4096 Feb  4 12:21 RPMS/</span><br><span class="line">drwxr-xr-x. 2 root root 4096 Feb  4 12:21 SOURCES/</span><br><span class="line">drwxr-xr-x. 2 root root 4096 Feb  4 12:21 SPECS/</span><br><span class="line">drwxr-xr-x. 2 root root 4096 Feb  4 12:21 SRPMS/</span><br></pre></td></tr></table></figure></p>
<h5 id="Download-Source-Tar-File"><a href="#Download-Source-Tar-File" class="headerlink" title="Download Source Tar File"></a><b>Download Source Tar File</b></h5><p>download the source tar file for the package that you want to build and save it under SOURCES directory</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># wget http://dev.mysql.com/get/Downloads/MySQL-5.6/mysql-5.6.21.tar.gz</span><br></pre></td></tr></table></figure>
<h5 id="Create-the-SPEC-File"><a href="#Create-the-SPEC-File" class="headerlink" title="Create the SPEC File"></a><b>Create the SPEC File</b></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">Name:</span><br><span class="line">Version:</span><br><span class="line">Release:	1%&#123;?dist&#125;</span><br><span class="line">Summary:</span><br><span class="line">Group:</span><br><span class="line">License:</span><br><span class="line">URL:</span><br><span class="line">Source0:</span><br><span class="line">BuildRoot:	%&#123;_tmppath&#125;/%&#123;name&#125;-%&#123;version&#125;-%&#123;release&#125;-root-%(%&#123;__id_u&#125; -n)</span><br><span class="line"></span><br><span class="line">BuildRequires:</span><br><span class="line">Requires:</span><br><span class="line"></span><br><span class="line">%description</span><br><span class="line"></span><br><span class="line">%prep</span><br><span class="line">%setup -q</span><br><span class="line"></span><br><span class="line">%build</span><br><span class="line">%configure</span><br><span class="line">make %&#123;?_smp_mflags&#125;</span><br><span class="line"></span><br><span class="line">%install</span><br><span class="line">rm -rf %&#123;buildroot&#125;</span><br><span class="line">make install DESTDIR=%&#123;buildroot&#125;</span><br><span class="line"></span><br><span class="line">%clean</span><br><span class="line">rm -rf %&#123;buildroot&#125;</span><br><span class="line"></span><br><span class="line">%files</span><br><span class="line">%defattr(-,root,root,-)</span><br><span class="line">%doc</span><br><span class="line"></span><br><span class="line">%changelog</span><br><span class="line"></span><br><span class="line">Name: Set the name of RPM. Whatever you give here will become the name of RPM.</span><br><span class="line">Version: Set RPM version number. Default is 1.0</span><br><span class="line">Release :Set release afterward, default is 1.el6 for RHEL 6</span><br><span class="line">Summary: describe the contents of the package</span><br><span class="line">Group: Related to the package groups listed in the XML file.</span><br><span class="line">License: RHEL 6 software is released under the GPL, but you can release your software under the license you prefer</span><br><span class="line">URL: Allow you to set the URL of your site.</span><br><span class="line">Above section specify the information required by package. When you run yum info [package name] or rpm -qi [package name ] command, you saw this information.</span><br><span class="line">BuildRoot: directory that will be used to actually build the software</span><br><span class="line">Source0 : specifies the name of the gzip compressed tar archive file. If you have multiple source you can specify them in series Source0, Source1, Source2 etc. For single source you can also use Source phrase.</span><br><span class="line">BuildRequires or Requires specifies the packages that must be installed before the RPM packages can be built with this spec file.</span><br><span class="line">%description allows you to include a brief paragraph description of the package.</span><br><span class="line">%prep commands require to prepare the source code</span><br><span class="line">%setup move the SOURCE into the BUILD directory and decompress the file archive.</span><br><span class="line">The –n option specifies the name of the directory where installation script should be entered after decompression.</span><br><span class="line">%install section is the place where software is compiled and installed.</span><br><span class="line">%files section allow you to include any additional file that you want in package. You can also specify the directory here, it will includes all files and subdirectories below it as well.</span><br><span class="line">%clean section will clean up the mess created during the process.</span><br></pre></td></tr></table></figure>
<p>Let look mysql5.6 program spec file<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">Name: mysql-rpm</span><br><span class="line">Version:5.6.21</span><br><span class="line">Release: renfengjun</span><br><span class="line">License: GPL</span><br><span class="line">URL: http://dev.mysql.com/</span><br><span class="line">Group: applications/database</span><br><span class="line">BuildRoot:%&#123;_tmppath&#125;/%&#123;name&#125;-%&#123;version&#125;-%&#123;release&#125;-root</span><br><span class="line">BuildRequires: cmake</span><br><span class="line">prefix: /usr/local/mysql</span><br><span class="line">Summary: mysql-5.6.21.tar.gz</span><br><span class="line">  </span><br><span class="line">%description</span><br><span class="line">The MySQL(TM) software delivers a very fast,multi-threaded, multi-user,</span><br><span class="line">and robust SQL (Structured Query Language)database server. MySQL Server</span><br><span class="line">is intended for mission-critical, heavy-loadproduction systems as well</span><br><span class="line">as for embedding into mass-deployed software.</span><br><span class="line">  </span><br><span class="line">%define MYSQL_USER mysql</span><br><span class="line">%define MYSQL_GROUP mysql</span><br><span class="line">%define __os_install_post %&#123;nil&#125;</span><br><span class="line">  </span><br><span class="line">%build</span><br><span class="line">cd $OLDPWD/../</span><br><span class="line">CFLAGS=&quot;-O3 -g -fno-exceptions-static-libgcc -fno-omit-frame-pointer -fno-strict-aliasing&quot;</span><br><span class="line">CXX=g++</span><br><span class="line">CXXFLAGS=&quot;-O3 -g -fno-exceptions -fno-rtti-static-libgcc -fno-omit-frame-pointer -fno-strict-aliasing&quot;</span><br><span class="line">export CFLAGS CXX CXXFLAGS</span><br><span class="line">  </span><br><span class="line">cmake .                                                 \</span><br><span class="line"> -DSYSCONFDIR:PATH=%&#123;prefix&#125;                            \</span><br><span class="line"> -DCMAKE_INSTALL_PREFIX:PATH=%&#123;prefix&#125;                  \</span><br><span class="line"> -DCMAKE_BUILD_TYPE:STRING=Release                      \</span><br><span class="line"> -DENABLE_PROFILING:BOOL=ON                             \</span><br><span class="line"> -DWITH_DEBUG:BOOL=OFF                                  \</span><br><span class="line"> -DWITH_VALGRIND:BOOL=OFF                               \</span><br><span class="line">  -DENABLE_DEBUG_SYNC:BOOL=OFF                           \</span><br><span class="line"> -DWITH_EXTRA_CHARSETS:STRING=all                       \</span><br><span class="line"> -DWITH_SSL:STRING=bundled                              \</span><br><span class="line"> -DWITH_UNIT_TESTS:BOOL=OFF                             \</span><br><span class="line"> -DWITH_ZLIB:STRING=bundled                             \</span><br><span class="line"> -DWITH_PARTITION_STORAGE_ENGINE:BOOL=ON                \</span><br><span class="line"> -DWITH_INNOBASE_STORAGE_ENGINE:BOOL=ON                 \</span><br><span class="line"> -DWITH_ARCHIVE_STORAGE_ENGINE:BOOL=ON                  \</span><br><span class="line"> -DWITH_BLACKHOLE_STORAGE_ENGINE:BOOL=ON                \</span><br><span class="line"> -DWITH_PERFSCHEMA_STORAGE_ENGINE:BOOL=ON               \</span><br><span class="line"> -DDEFAULT_CHARSET=utf8                                 \</span><br><span class="line"> -DDEFAULT_COLLATION=utf8_general_ci                    \</span><br><span class="line"> -DWITH_EXTRA_CHARSETS=all                             \</span><br><span class="line"> -DENABLED_LOCAL_INFILE:BOOL=ON                         \</span><br><span class="line"> -DWITH_EMBEDDED_SERVER=0                               \</span><br><span class="line"> -DINSTALL_LAYOUT:STRING=STANDALONE                     \</span><br><span class="line"> -DCOMMUNITY_BUILD:BOOL=ON                              \</span><br><span class="line">  -DMYSQL_SERVER_SUFFIX=&apos;-r5436&apos;;</span><br><span class="line">  </span><br><span class="line">make -j `cat /proc/cpuinfo | grep processor| wc-l`</span><br><span class="line">  </span><br><span class="line">%install</span><br><span class="line">cd $OLDPWD/../</span><br><span class="line">make DESTDIR=$RPM_BUILD_ROOT install</span><br><span class="line">  </span><br><span class="line">%clean</span><br><span class="line">rm -rf $RPM_BUILD_ROOT</span><br><span class="line">  </span><br><span class="line">%pre</span><br><span class="line">mkdir -p /usr/local/mysql/data</span><br><span class="line">mkdir -p /usr/local/mysql/run</span><br><span class="line">mkdir -p /usr/local/mysql/log</span><br><span class="line">groupadd mysql</span><br><span class="line">useradd -g mysql mysql</span><br><span class="line">chown -R mysql:mysql /usr/local/mysql/data</span><br><span class="line">chown -R mysql:mysql /usr/local/mysql/log</span><br><span class="line">chown -R mysql:mysql /usr/local/mysql/run</span><br><span class="line">echo &quot;exportPATH=$PATH:/usr/local/mysql/bin&quot; &gt;&gt; /home/mysql/.bash_profile</span><br><span class="line">  </span><br><span class="line">%post</span><br><span class="line">ln -s %&#123;prefix&#125;/lib %&#123;prefix&#125;/lib64</span><br><span class="line">cp /usr/local/mysql/support-files/mysql.server/etc/init.d/mysql</span><br><span class="line">chkconfig mysql on</span><br><span class="line">   </span><br><span class="line">%preun</span><br><span class="line">chkconfig --del mysql</span><br><span class="line">rm -rf /usr/local</span><br><span class="line">userdel mysql</span><br><span class="line">rm -rf /var/spool/mail/mysql</span><br><span class="line">rm -rf /etc/init.d/mysql</span><br><span class="line">rm -rf /home/mysql</span><br><span class="line">  </span><br><span class="line">%files</span><br><span class="line">%defattr(-, %&#123;MYSQL_USER&#125;, %&#123;MYSQL_GROUP&#125;)</span><br><span class="line">%attr(755, %&#123;MYSQL_USER&#125;, %&#123;MYSQL_GROUP&#125;)%&#123;prefix&#125;/*</span><br><span class="line"></span><br><span class="line">%changelog</span><br></pre></td></tr></table></figure></p>
<p>Now,we can start build<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpmbuild -ba mysql.spec</span><br></pre></td></tr></table></figure></p>
<h5 id="Packaging-RPMMacros"><a href="#Packaging-RPMMacros" class="headerlink" title="Packaging:RPMMacros"></a><b>Packaging:RPMMacros</b></h5><ul>
<li><p>Macros mimicking autoconf variables</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">%&#123;_sysconfdir&#125;        /etc</span><br><span class="line">%&#123;_prefix&#125;            /usr</span><br><span class="line">%&#123;_exec_prefix&#125;       %&#123;_prefix&#125;</span><br><span class="line">%&#123;_bindir&#125;            %&#123;_exec_prefix&#125;/bin</span><br><span class="line">%&#123;_libdir&#125;            %&#123;_exec_prefix&#125;/%&#123;_lib&#125;</span><br><span class="line">%&#123;_libexecdir&#125;        %&#123;_exec_prefix&#125;/libexec</span><br><span class="line">%&#123;_sbindir&#125;           %&#123;_exec_prefix&#125;/sbin</span><br><span class="line">%&#123;_sharedstatedir&#125;    /var/lib</span><br><span class="line">%&#123;_datarootdir&#125;       %&#123;_prefix&#125;/share</span><br><span class="line">%&#123;_datadir&#125;           %&#123;_datarootdir&#125;</span><br><span class="line">%&#123;_includedir&#125;        %&#123;_prefix&#125;/include</span><br><span class="line">%&#123;_infodir&#125;           /usr/share/info</span><br><span class="line">%&#123;_mandir&#125;            /usr/share/man</span><br><span class="line">%&#123;_localstatedir&#125;     /var</span><br><span class="line">%&#123;_initddir&#125;          %&#123;_sysconfdir&#125;/rc.d/init.d</span><br></pre></td></tr></table></figure>
</li>
<li><p>Other macros and variables for paths</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">%&#123;_var&#125;               /var</span><br><span class="line">%&#123;_tmppath&#125;           %&#123;_var&#125;/tmp</span><br><span class="line">%&#123;_usr&#125;               /usr</span><br><span class="line">%&#123;_usrsrc&#125;            %&#123;_usr&#125;/src</span><br><span class="line">%&#123;_lib&#125;               lib (lib64 on 64bit multilib systems)</span><br><span class="line">%&#123;_docdir&#125;            %&#123;_datadir&#125;/doc</span><br><span class="line">%&#123;buildroot&#125;          %&#123;_buildrootdir&#125;/%&#123;name&#125;-%&#123;version&#125;-%&#123;release&#125;.%&#123;_arch&#125;</span><br><span class="line">$RPM_BUILD_ROOT       %&#123;buildroot&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Build flags macros and variables<br>These macros should be used as flags for the compiler or linker. Note that the values for the macros below reflect the settings on Fedora 13 (i686) with redhat-rpm-config installed.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">%&#123;__global_cflags&#125;   -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4</span><br><span class="line">%&#123;optflags&#125;          %&#123;__global_cflags&#125; -m32 -march=i686 -mtune=atom -fasynchronous-unwind-tables</span><br><span class="line">$RPM_OPT_FLAGS       %&#123;optflags&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>RPM directory macros</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">%&#123;_topdir&#125;            %&#123;getenv:HOME&#125;/rpmbuild</span><br><span class="line">%&#123;_builddir&#125;          %&#123;_topdir&#125;/BUILD</span><br><span class="line">%&#123;_rpmdir&#125;            %&#123;_topdir&#125;/RPMS</span><br><span class="line">%&#123;_sourcedir&#125;         %&#123;_topdir&#125;/SOURCES</span><br><span class="line">%&#123;_specdir&#125;           %&#123;_topdir&#125;/SPECS</span><br><span class="line">%&#123;_srcrpmdir&#125;         %&#123;_topdir&#125;/SRPMS</span><br><span class="line">%&#123;_buildrootdir&#125;      %&#123;_topdir&#125;/BUILDROOT</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><a href="https://fedoraproject.org/wiki/Packaging:RPMMacros?rd=Packaging/RPMMacros#RPM_directory_macros" target="_blank" rel="noopener">Packaging:RPMMacros</a><br><a href="https://fedoraproject.org/wiki/How_to_create_an_RPM_package/zh-cn" target="_blank" rel="noopener">How to create an RPM package/zh-cn</a></p>
<hr>
<p>您的鼓励是我写作最大的动力</p>
<p>俗话说，投资效率是最好的投资。 如果您感觉我的文章质量不错，读后收获很大，预计能为您提高 10% 的工作效率，不妨小额捐助我一下，让我有动力继续写出更多好文章。</p>

							<!-- 支付宝打赏图案 -->
      						<!--
      						<div id="donate_guide" class="donate_bar center ">
          					<a href="http://mypay-1253516637.costj.myqcloud.com/2000.jpg" title="支付宝打赏" class="fancybox" rel="article0"       style="float:left;margin-left:25%;margin-right:2px;">
          					<img src="http://mypay-1253516637.costj.myqcloud.com/2000.jpg" title="支付宝打赏" height="164px" width="164px">
          					</a> 
      						</div>
      						-->
					</div>

			  <!-- about -->
			  
		</div>

		<!-- pagination -->
	  
	  
	    
		<!-- 来必力City版安装代码 -->
<div id="lv-container" data-id="city" data-uid="MTAyMC8zOTQ5MS8xNjAxOA==">
	<script type="text/javascript">
   (function(d, s) {
       var j, e = d.getElementsByTagName(s)[0];

       if (typeof LivereTower === 'function') { return; }

       j = d.createElement(s);
       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
       j.async = true;

       e.parentNode.insertBefore(j, e);
   })(document, 'script');
	</script>
<noscript> 为正常使用来必力评论功能请激活JavaScript</noscript>
</div>
<!-- City版安装代码已完成 -->
		
<!--		<div class="comment-section">
  
  


</div> -->
	</div>

	

</div>


		<footer>
			


<p>
  由 <a href="https://hexo.io">hexo</a> 强力驱动 |&nbsp;&nbsp;本站总点击 <span id="busuanzi_value_site_pv"></span> 次
&nbsp;&nbsp;|&nbsp;&nbsp;您是第 <span id="busuanzi_value_site_uv"></span> 位访客
</p>
<p>
  &copy; 2024 <a href="https://t1ger.github.io"> t1ger </a>
  &nbsp;&nbsp;|&nbsp;&nbsp;<span><a href="/baidusitemap.xml">百度网站地图</a></span>

</p>

<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

<script>
(function(){
    var bp = document.createElement('script');
    bp.src = '//push.zhanzhang.baidu.com/push.js';
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

<a id="gotop" href="#" title="back to top"><i class="mdi-hardware-keyboard-arrow-up"></i></a>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-99921399-1', 'auto');
  ga('send', 'pageview');

</script>
		</footer>
	  </div>

		<!-- <script src="/libs/bs/js/bootstrap.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script>
		<script>(typeof $().modal == 'function')|| document.write('<script src="/libs/bs/js/bootstrap.min.js" type="text/javascript"><\/script>')</script>

		<!-- material design -->
		<!-- <script src="/libs/bs-material/js/ripples.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/ripples.min.js"></script>
		<!-- <script src="/libs/bs-material/js/material.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/material.min.js"></script>
		<!-- toc -->
		<!-- <script src="/libs/tocify/jquery-ui.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
		<script src="/libs/tocify/jquery.tocify.custom.js"></script>

		<script src="/js/main.js"></script>

	</body>
</html>
