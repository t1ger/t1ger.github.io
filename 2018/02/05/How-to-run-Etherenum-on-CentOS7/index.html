	<!DOCTYPE HTML>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  <meta name="google-site-verification" content="B6QNJ8N2Q7hbnMncyrM5GMCWgK-vIAEx0o2DQre64ls">
  
  <title>How to run Etherenum on CentOS7 | t1ger的茶馆</title>
  <meta name="author" content="t1ger">
  
  <meta name="description" content="https://t1ger.github.io/">
  

  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta property="og:title" content="How to run Etherenum on CentOS7">
  <meta property="og:site_name" content="t1ger的茶馆">

  
  
		<!-- favicon -->
		<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
		<link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
		<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
		<link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
		<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
		<link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
		<link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
		<link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
		<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
		<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
		<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
		<link rel="manifest" href="/manifest.json">
		<meta name="msapplication-TileColor" content="#009688">
		<meta name="msapplication-TileImage" content="/mstile-144x144.png">
		<meta name="theme-color" content="#009688">
		<!-- favicon end -->
    <!-- <link href="/favicon.ico" rel="icon"> -->
  

  <!-- toc -->
  <link rel="stylesheet" href="/libs/tocify/jquery.tocify.css" media="screen" type="text/css">

  <!-- <link rel="stylesheet" href="/libs/bs/css/bootstrap.min.css" media="screen" type="text/css"> -->
  <link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.min.css" media="screen" type="text/css">

  <!-- material design -->
	<!-- <link rel="stylesheet" href="/libs/bs-material/css/ripples.min.css" media="screen" type="text/css"> -->
  <link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/ripples.min.css" media="screen" type="text/css">
  <!-- <link rel="stylesheet" href="/libs/bs-material/css/material.min.css" media="screen" type="text/css"> -->
	<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/material.min.css" media="screen" type="text/css">

  <link rel="stylesheet" href="/css/highlight.light.css" media="screen" type="text/css">

  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">

  

  

  <script src="//apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script>
	<script>window.jQuery || document.write('<script src="/libs/jquery-2.0.3.min.js" type="text/javascript"><\/script>')</script>

</head>
</html>
 	<body>
	  <nav class="navbar navbar-default">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">菜单</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">t1ger的茶馆</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav navbar-right">
                
                <li>
                    <a href="/" title="">
                    <i class="fa fa-home"></i>首页
                    </a>
                </li>
                
                <li>
                    <a href="/archives" title="">
                    <i class="fa fa-list"></i>存档
                    </a>
                </li>
                
                <li>
                    <a href="/about" title="">
                    <i class="fa fa-info-circle"></i>关于
                    </a>
                </li>
                
                <li>
                    <a href="/atom.xml" title="这是一个订阅源">
                    <i class="fa fa-rss"></i>RSS
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</nav>

	  <div class="container" >
	    <div class="row">
	
	<div class="col-md-9 center-content">
	

		<div class="content">
			<!-- index -->
		   

			  		<h2>How to run Etherenum on CentOS7</h2>
					
					<div>
						<span class="post-time">2018-02-05 10:24:40</span>
					</div>	
					

					<div class="article-content">
						<h5 id="以太坊客户端"><a href="#以太坊客户端" class="headerlink" title="以太坊客户端"></a><b>以太坊客户端</b></h5><p>Etherenum主流的客户端实现有以下几种，分别是C++, Go, Python，分别对应cpp-ethereum, go-ethereum, pyethapp.<br>C++实现称为Eth,Go语言的实现被称为Geth,Python的实现被称为Pyethapp.客户端是指一种接入Ethereum网络的节点并且与其发生交互和更新blockchain状态</p>
<p>其中最常用的有 Go 语言实现的 go-ethereum 客户端 Geth，支持接入以太坊网络并成为一个完整节点，也可作为一个 HTTP-RPC 服务器对外提供 JSON-RPC 接口</p>
<h5 id="Geth安装和配置"><a href="#Geth安装和配置" class="headerlink" title="Geth安装和配置"></a><b>Geth安装和配置</b></h5><p>Go语言的安装和配置略，Geth可以编译安装，也可以直接下载二进制安装包,参考<a href="https://geth.ethereum.org/downloads/" target="_blank" rel="noopener">这里</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/ethereum/go-ethereum</span><br><span class="line">cd go-ethereum</span><br><span class="line">make geth</span><br></pre></td></tr></table></figure></p>
<p>安装完成后，可以使用 geth version 命令查看是否安装成功。记得把生成的 geth 加入到系统的环境变量中</p>
<h5 id="安装-Solidity-编译器"><a href="#安装-Solidity-编译器" class="headerlink" title="安装 Solidity 编译器"></a><b>安装 Solidity 编译器</b></h5><p>Solidity 编译器也有多种方法安装，参照<a href="https://solidity.readthedocs.io/en/latest/installing-solidity.html" target="_blank" rel="noopener">这里</a><br>官方推荐使用基于浏览器的 IDE 环境:<a href="https://remix.ethereum.org" target="_blank" rel="noopener">Remix</a></p>
<h5 id="私有链搭建"><a href="#私有链搭建" class="headerlink" title="私有链搭建"></a><b>私有链搭建</b></h5><ul>
<li><p>配置初始状态<br>运行以太坊私有链，需要定义自己的创世区块，创世区块信息写在一个 JSON 格式的配置文件中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost]#cat genesis.json </span><br><span class="line">&#123;</span><br><span class="line">        &quot;nonce&quot;: &quot;0x0000000000000042&quot;,</span><br><span class="line">        &quot;timestamp&quot;: &quot;0x00&quot;,</span><br><span class="line">        &quot;parentHash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span><br><span class="line">        &quot;extraData&quot;: &quot;0x00&quot;,</span><br><span class="line">        &quot;gasLimit&quot;: &quot;0x8000000&quot;,</span><br><span class="line">        &quot;difficulty&quot;: &quot;0x4000&quot;,</span><br><span class="line">        &quot;mixhash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span><br><span class="line">        &quot;coinbase&quot;: &quot;0x3333333333333333333333333333333333333333&quot;,</span><br><span class="line">        </span><br><span class="line">        &quot;config&quot;: &#123;</span><br><span class="line">                &quot;chainId&quot;: 1984,</span><br><span class="line">                &quot;homesteadBlock&quot;: 0,</span><br><span class="line">                &quot;eip155Block&quot;: 0,</span><br><span class="line">                &quot;eip158Block&quot;: 0</span><br><span class="line">        &#125;,</span><br><span class="line">        </span><br><span class="line">        &quot;alloc&quot;:&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#初始化创世区块</span><br><span class="line">[root@localhost]#geth --datadir &quot;/root/.ethereum&quot; init genesis.json </span><br><span class="line">I0131 18:57:50.858609 ethdb/database.go:83] Alloted 16MB cache and 16 file handles to /root/.ethereum/chaindata</span><br><span class="line">I0131 18:57:50.865414 cmd/geth/main.go:299] successfully wrote genesis block and/or chain rule set: f2ebfaadd3ae79075cc9485eb5ab634c9927504736c60dc88d571fb85d9f6493</span><br></pre></td></tr></table></figure>
<p>  chainID 指定了独立的区块链网络 ID。网络 ID 在连接到其他节点的时候会用到，以太坊公网的网络 ID 是 1，为了不与公有链网络冲突，运行私有链节点的时候要指定自己的网络 ID。不同 ID 网络的节点无法相互连接。配置文件还对当前挖矿难度 difficulty、区块 Gas 消耗限制 gasLimit 等参数进行了设置<br>打开此节点的命令控制台console，并新建账户</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#启动私有链节点</span><br><span class="line">geth --datadir &quot;/root/.ethereum&quot; --port 30002 --nodiscover  console</span><br><span class="line">#新建用户</span><br><span class="line">&gt;personal.newAccount(&quot;passward&quot;)</span><br><span class="line">#开始挖矿</span><br><span class="line">&gt;miner.start(1)</span><br><span class="line">true</span><br><span class="line">#停止挖矿</span><br><span class="line">&gt;miner.stop()</span><br><span class="line">true</span><br><span class="line">#查看账户</span><br><span class="line">&gt; eth.accounts</span><br><span class="line">#查看账户余额</span><br><span class="line">&gt;eth.getBalance(eth.accounts[0])</span><br></pre></td></tr></table></figure>
<p>  发送交易</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&gt;  eth.getBalance(eth.accounts[0])</span><br><span class="line">320000000000000300000</span><br><span class="line">&gt; eth.getBalance(eth.accounts[1])</span><br><span class="line">0</span><br><span class="line">&gt;  personal.unlockAccount(eth.accounts[0])</span><br><span class="line">Unlock account 0x30a42e0da52f20154ce2b966a53a81099f048e73</span><br><span class="line">Passphrase: </span><br><span class="line">true</span><br><span class="line">&gt;  amount = web3.toWei(5,&apos;ether&apos;)</span><br><span class="line">&quot;5000000000000000000&quot;</span><br><span class="line">&gt; eth.sendTransaction(&#123;from:eth.accounts[0],to:eth.accounts[1],value:amount&#125;)</span><br><span class="line">I0205 11:51:11.752411 eth/api.go:1185] Tx(0x318cf8d6f86f0f294eb927af3019cede420990beac1cf72046d03d454ff48b88) to: 0xae370f3b2af53f6ba282a76bbe6956d443bc8d79</span><br><span class="line">&quot;0x318cf8d6f86f0f294eb927af3019cede420990beac1cf72046d03d454ff48b88&quot;</span><br><span class="line"></span><br><span class="line">#此时如果没有挖矿，用 txpool.status 命令可以看到本地交易池中有一个待确认的交易，可以使用 eth.getBlock(&quot;pending&quot;, true).transactions 查看当前待确认交易</span><br><span class="line"></span><br><span class="line">&gt; miner.start(1);admin.sleepBlocks(1);miner.stop();</span><br><span class="line"></span><br><span class="line">#新区块挖出后，挖矿结束，查看账户 1 的余额，已经收到了账户 0 的以太币：</span><br><span class="line">&gt; web3.fromWei(eth.getBalance(eth.accounts[1]),&apos;ether&apos;)</span><br><span class="line">5</span><br></pre></td></tr></table></figure>
<p>  查看交易和区块</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">#查看当前区块总数：</span><br><span class="line">&gt; eth.blockNumber</span><br><span class="line">66</span><br><span class="line">#通过交易 Hash 查看交易（Hash 值包含在上面交易返回值中）</span><br><span class="line">&gt; eth.getTransaction(&quot;0x318cf8d6f86f0f294eb927af3019cede420990beac1cf72046d03d454ff48b88&quot;)</span><br><span class="line">&#123;</span><br><span class="line">  blockHash: &quot;0x45c8732599e45791c22a4c1d2278387eff05e6f062f8f1871912bd4fbee4787f&quot;,</span><br><span class="line">  blockNumber: 65,</span><br><span class="line">  from: &quot;0x30a42e0da52f20154ce2b966a53a81099f048e73&quot;,</span><br><span class="line">  gas: 90000,</span><br><span class="line">  gasPrice: 20000000000,</span><br><span class="line">  hash: &quot;0x318cf8d6f86f0f294eb927af3019cede420990beac1cf72046d03d454ff48b88&quot;,</span><br><span class="line">  input: &quot;0x&quot;,</span><br><span class="line">  nonce: 0,</span><br><span class="line">  to: &quot;0xae370f3b2af53f6ba282a76bbe6956d443bc8d79&quot;,</span><br><span class="line">  transactionIndex: 0,</span><br><span class="line">  value: 5000000000000000000</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#通过区块号查看区块：</span><br><span class="line">&gt; eth.getBlock(66)</span><br><span class="line">&#123;</span><br><span class="line">  difficulty: 131072,</span><br><span class="line">  extraData: &quot;0xd783010412844765746887676f312e372e31856c696e7578&quot;,</span><br><span class="line">  gasLimit: 125836029,</span><br><span class="line">  gasUsed: 0,</span><br><span class="line">  hash: &quot;0x7398a4794f1a6c24fa193b3a45e96c9b8925047a4c4ffb5112ffee182e8e05ba&quot;,</span><br><span class="line">  logsBloom: &quot;0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;,</span><br><span class="line">  miner: &quot;0x30a42e0da52f20154ce2b966a53a81099f048e73&quot;,</span><br><span class="line">  nonce: &quot;0x2d4f36efb89667d8&quot;,</span><br><span class="line">  number: 66,</span><br><span class="line">  parentHash: &quot;0x45c8732599e45791c22a4c1d2278387eff05e6f062f8f1871912bd4fbee4787f&quot;,</span><br><span class="line">  receiptRoot: &quot;0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421&quot;,</span><br><span class="line">  sha3Uncles: &quot;0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347&quot;,</span><br><span class="line">  size: 536,</span><br><span class="line">  stateRoot: &quot;0x50cd8603d98fe157cabc1d596e7a7926231e8dee792cabd199f263dc0c5691a5&quot;,</span><br><span class="line">  timestamp: 1517802759,</span><br><span class="line">  totalDifficulty: 8792593,</span><br><span class="line">  transactions: [],</span><br><span class="line">  transactionsRoot: &quot;0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421&quot;,</span><br><span class="line">  uncles: []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  连接到其他节点</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#通过 admin.addPeer() 方法连接到其他节点，两个节点要要指定相同的 chainID</span><br><span class="line">查看其中一个 enode 信息：</span><br><span class="line">&gt; admin.nodeInfo.enode</span><br><span class="line">&quot;enode://34753757021f60aac9ad5402344ae353b9c431c3b60c8e671a753639dd5aef35bb180b8d056a5f3b1ac46fd5cda0163f88eff8e1856a1b3982cc576df81e295a@[::]:30002?discport=0&quot;</span><br><span class="line"></span><br><span class="line">然后在另外节点的 JavaScript console 中执行 admin.addPeer()，就可以连接：</span><br><span class="line"> admin.addPeer(&quot;enode://34753757021f60aac9ad5402344ae353b9c431c3b60c8e671a753639dd5aef35bb180b8d056a5f3b1ac46fd5cda0163f88eff8e1856a1b3982cc576df81e295a@[::]:30002?discport=0&quot;)</span><br><span class="line"></span><br><span class="line">#addPeer() 的参数就是节点二的 enode 信息，注意要把 enode 中的 [::] 替换成节点二的 IP 地址。</span><br><span class="line">连接成功后，节点就会开始同步另一个节点的区块，同步完成后，</span><br><span class="line">任意一个节点开始挖矿，另一个节点会自动同步区块，向任意一个节点发送交易，另一个节点也会收到该笔交易</span><br></pre></td></tr></table></figure>
<p>  除了上面的方法，也可以在启动节点的时候指定 –bootnodes 选项连接到其他节点</p>
</li>
</ul>
<h5 id="智能合约操作"><a href="#智能合约操作" class="headerlink" title="智能合约操作"></a><b>智能合约操作</b></h5><ul>
<li><p>创建和编译智能合约<br>新建一个 Solidity 智能合约文件，命名为 test.sol，该合约包含一个方法 multiply()，将输入的两个数相乘后输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.4.0;</span><br><span class="line">contract Test</span><br><span class="line">&#123;</span><br><span class="line">    function multiply(uint a, uint b) returns (uint)</span><br><span class="line">    &#123;</span><br><span class="line">        return a * b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  编译智能合约，获得编译后的 EVM 二进制码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">solc --bin test.sol</span><br></pre></td></tr></table></figure>
<p>  再用 solc 获取智能合约的 JSON ABI（Application Binary Interface），其中指定了合约接口，包括可调用的合约方法、变量、事件等</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">solc --abi test.sol</span><br></pre></td></tr></table></figure>
<p>  回到 Geth 的控制台，用变量 code 和 abi 记录上面两个值，注意在 code 前加上 0x 前缀：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; code = &quot;0x6060604052341561000f57600080fd5b5b60b48061001e6000396000f30060606040526000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff168063165c4a1614603d575b600080fd5b3415604757600080fd5b60646004808035906020019091908035906020019091905050607a565b6040518082815260200191505060405180910390f35b600081830290505b929150505600a165627a7a72305820b494a4b3879b3810accf64d4cc3e1be55f2f4a86f49590b8a9b8d7009090a5d30029&quot;</span><br><span class="line">&gt; abi = [&#123;&quot;constant&quot;:false,&quot;inputs&quot;:[&#123;&quot;name&quot;:&quot;a&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;name&quot;:&quot;b&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;multiply&quot;,&quot;outputs&quot;:[&#123;&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;]</span><br></pre></td></tr></table></figure>
</li>
<li><p>部署智能合约<br>这里使用账户 0 来部署合约，首先解锁账户：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;  personal.unlockAccount(eth.accounts[0])</span><br><span class="line">Unlock account 0x30a42e0da52f20154ce2b966a53a81099f048e73</span><br><span class="line">Passphrase: </span><br><span class="line">true</span><br></pre></td></tr></table></figure>
</li>
<li><p>发送部署合约的交易</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&gt; myContract = eth.contract(abi)</span><br><span class="line">...</span><br><span class="line">&gt; contract = myContract.new(&#123;from:eth.accounts[0],data:code,gas:1000000&#125;)</span><br><span class="line"></span><br><span class="line">INFO [09-12|08:05:19] Submitted contract creation              fullhash=0x0a7dfa9cac7ef836a72ed1d5bbfa65c0220347cde4efb067a0b03b15fb70bce1 contract=0x7cbe4019e993f9922b8233502d94890099ee59e6</span><br><span class="line">&#123;</span><br><span class="line">  abi: [&#123;</span><br><span class="line">      constant: false,</span><br><span class="line">      inputs: [&#123;...&#125;, &#123;...&#125;],</span><br><span class="line">      name: &quot;multiply&quot;,</span><br><span class="line">      outputs: [&#123;...&#125;],</span><br><span class="line">      payable: false,</span><br><span class="line">      stateMutability: &quot;nonpayable&quot;,</span><br><span class="line">      type: &quot;function&quot;</span><br><span class="line">  &#125;],</span><br><span class="line">  address: undefined,</span><br><span class="line">  transactionHash: &quot;0x0a7dfa9cac7ef836a72ed1d5bbfa65c0220347cde4efb067a0b03b15fb70bce1&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  此时如果没有挖矿，用 txpool.status 命令可以看到本地交易池中有一个待确认的交易。可以查看当前待确认的交易，使用 miner.start() 命令开始挖矿，一段时间后交易会被确认，随新区块进入区块链</p>
</li>
<li><p>调用智能合约</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; contract.multiply.sendTransaction(2, 4, &#123;from:eth.accounts[0]&#125;)</span><br></pre></td></tr></table></figure>
<p>  如果只是本地运行该方法查看返回结果，可以采用如下方式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; contract.multiply.call(2，4)</span><br><span class="line">8</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="安装ethereum钱包"><a href="#安装ethereum钱包" class="headerlink" title="安装ethereum钱包"></a><b>安装ethereum钱包</b></h5><p>钱包下载地址，参考<a href="https://github.com/ethereum/mist/releases" target="_blank" rel="noopener">这里</a><br>钱包在启动时默认在本机查找的IPC路径,钱包启动后能自动识别到你的私有链<br>OS的默认查找路径如下,具体可查看<a href="https://github.com/ethereum/mist/blob/master/modules/settings.js#L248" target="_blank" rel="noopener">这里</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">windows: .\pipe\geth.ipc</span><br><span class="line">linux: /.ethereum/geth.ipc</span><br><span class="line">freebsd: /.ethereum/geth.ipc</span><br><span class="line">sunos: /.ethereum/geth.ipc</span><br></pre></td></tr></table></figure></p>
<p>ref<br><a href="https://github.com/ethereum/go-ethereum/wiki/Private-network" target="_blank" rel="noopener">Private network</a><br><a href="https://github.com/ethereum/cpp-ethereum" target="_blank" rel="noopener">ethereum/cpp-ethereum</a><br><a href="https://github.com/ethereum/go-ethereum" target="_blank" rel="noopener">Go Ethereum</a><br><a href="http://www.ethdocs.org/en/latest/ethereum-clients/cpp-ethereum/installing-binaries/index.html" target="_blank" rel="noopener">Installing binaries</a><br><a href="https://g2ex.github.io/2017/09/12/ethereum-guidance/" target="_blank" rel="noopener">以太坊私有链搭建指南</a><br><a href="https://github.com/xiaoping378/blog/blob/master/posts/%E4%BB%A5%E5%A4%AA%E5%9D%8A-%E7%A7%81%E6%9C%89%E9%93%BE%E6%90%AD%E5%BB%BA%E5%88%9D%E6%AD%A5%E5%AE%9E%E8%B7%B5.md" target="_blank" rel="noopener">利用puppeth搭建POA共识的以太坊私链网络</a></p>
<hr>
<p>您的鼓励是我写作最大的动力</p>
<p>俗话说，投资效率是最好的投资。 如果您感觉我的文章质量不错，读后收获很大，预计能为您提高 10% 的工作效率，不妨小额捐助我一下，让我有动力继续写出更多好文章。</p>

							<!-- 支付宝打赏图案 -->
      						<!--
      						<div id="donate_guide" class="donate_bar center ">
          					<a href="http://mypay-1253516637.costj.myqcloud.com/2000.jpg" title="支付宝打赏" class="fancybox" rel="article0"       style="float:left;margin-left:25%;margin-right:2px;">
          					<img src="http://mypay-1253516637.costj.myqcloud.com/2000.jpg" title="支付宝打赏" height="164px" width="164px">
          					</a> 
      						</div>
      						-->
					</div>

			  <!-- about -->
			  
		</div>

		<!-- pagination -->
	  
	  
	    
		<!-- 来必力City版安装代码 -->
<div id="lv-container" data-id="city" data-uid="MTAyMC8zOTQ5MS8xNjAxOA==">
	<script type="text/javascript">
   (function(d, s) {
       var j, e = d.getElementsByTagName(s)[0];

       if (typeof LivereTower === 'function') { return; }

       j = d.createElement(s);
       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
       j.async = true;

       e.parentNode.insertBefore(j, e);
   })(document, 'script');
	</script>
<noscript> 为正常使用来必力评论功能请激活JavaScript</noscript>
</div>
<!-- City版安装代码已完成 -->
		
<!--		<div class="comment-section">
  
  


</div> -->
	</div>

	

</div>


		<footer>
			


<p>
  由 <a href="https://hexo.io">hexo</a> 强力驱动 |&nbsp;&nbsp;本站总点击 <span id="busuanzi_value_site_pv"></span> 次
&nbsp;&nbsp;|&nbsp;&nbsp;您是第 <span id="busuanzi_value_site_uv"></span> 位访客
</p>
<p>
  &copy; 2023 <a href="https://t1ger.github.io"> t1ger </a>
  &nbsp;&nbsp;|&nbsp;&nbsp;<span><a href="/baidusitemap.xml">百度网站地图</a></span>

</p>

<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

<script>
(function(){
    var bp = document.createElement('script');
    bp.src = '//push.zhanzhang.baidu.com/push.js';
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

<a id="gotop" href="#" title="back to top"><i class="mdi-hardware-keyboard-arrow-up"></i></a>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-99921399-1', 'auto');
  ga('send', 'pageview');

</script>
		</footer>
	  </div>

		<!-- <script src="/libs/bs/js/bootstrap.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script>
		<script>(typeof $().modal == 'function')|| document.write('<script src="/libs/bs/js/bootstrap.min.js" type="text/javascript"><\/script>')</script>

		<!-- material design -->
		<!-- <script src="/libs/bs-material/js/ripples.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/ripples.min.js"></script>
		<!-- <script src="/libs/bs-material/js/material.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/material.min.js"></script>
		<!-- toc -->
		<!-- <script src="/libs/tocify/jquery-ui.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
		<script src="/libs/tocify/jquery.tocify.custom.js"></script>

		<script src="/js/main.js"></script>

	</body>
</html>
